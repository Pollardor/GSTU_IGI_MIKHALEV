@{
    ViewData["Title"] = "";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model RentsViewModel
@using lab2.Models
@using IGILab1Norm;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<div style="border:double grey 4px; margin-top:5px; padding:20px; padding-bottom:20px; ">
    <form asp-action="Index" class="form-inline" method="post" style=" width:600px;margin:0px auto;">
        Month of rent: @Html.TextBox("MonthRent", Model.RentFilter.MonthRent)
        Worker FIO: @Html.TextBox("WorkerFIO", Model.RentFilter.WorkerFIO)
        <input type="submit" value="Find" />
    </form>
    <table style="width:100%; border:4px double; padding:20px; ">
        <tr>
            <th>ID</th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.RentSort.Models.RentDateSort">
                    Rent date
                </a>
            </th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.RentSort.Models.DateGetSort">
                    Date get
                </a>
            </th>
            <th>Car ID</th>
            <th>Client ID</th>
            <th>Rent price</th>
            <th>is Paid</th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.RentSort.Models.WorkerFIOSort">
                    Worker FIO
                </a>
            </th>
            <th>

            </th>
        </tr>
        @foreach (Rent current in Model.Rents)
        {
            <tr>
                <td>@current.RentID</td>
                <td>@current.RentDate.ToString("yyyy-MM-dd")</td>
                <td>@current.DateGet.ToString("yyyy-MM-dd")</td>
                <td>@current.Car.CarMark</td>
                <td>@current.Client.ClienFIO</td>
                <td>@current.RentPrice</td>
                <td>@current.Paid.ToString()</td>
                <td>@current.WorkerFIO</td>
                <td align="center" class="tdElem">
                    @using (Html.BeginForm("Editing", "Rent", FormMethod.Post, new { @class = "form-signin" }))
                    {
                        <input type="hidden" name="id" value="@current.RentID.ToString()" />
                        <input class="btn btn-success" type="submit" value="Edit" formaction="Edit" />
                        <input class="btn btn-danger" type="submit" value="Delete" formaction="Delete" onclick="return confirm('Are you sure, that you want to delete rent?');">
                    }
                </td>
            </tr>
        }
    </table>
    @lab2.Helpers.NavigationHelper.CreateNavigation(Html, "/Rent/Index", Model.PageViewModel)
    @using (@Html.BeginForm("AddNewRent", "Rent", FormMethod.Post))
    {

        Rent rent = (Rent)ViewData["AddingRent"];
        <input type="hidden" value="@rent.RentID" name="Id" />
        <div class="form-group">
            <label for="Clients">Select client</label>
            <select class="form-control" id="Client" name="Client">
                @{
                    List<Client> clients = (List<Client>)ViewData["Clients"];
                    foreach (var item in clients)
                    {
                        <option value=@item.Id>
                            @item.ClienFIO
                        </option>

                    }
                }
            </select>
        </div>
        <div class="form-group">
            <label for="Car">Select car</label>
            <select class="form-control" id="Car" name="Car">
                @{
                    List<Car> cars = (List<Car>)ViewData["Cars"];
                    foreach (var item in cars)
                    {
                        <option value=@item.CarID>
                            @item.CarMark @item.RegNum
                        </option>

                    }
                }
            </select>
        </div>
        <div class="form-group">
            <label for="RentDate">Input rent date</label>

            @Html.EditorFor(model => rent.RentDate)
        </div>
        <div class="form-group">
            <label for="DateGet">Input date get</label>

            @Html.EditorFor(model => rent.DateGet)
        </div>
        <div class="form-group">
            <label for="RentPrice">Input rent price</label>

            @Html.EditorFor(model => rent.RentPrice)
        </div>
        <div class="form-group">
            <label for="Paid">Input is paid</label>

            @Html.EditorFor(model => rent.Paid)
        </div>
        <div class="form-group">
            <label for="WorkerFIO">Input worker fio</label>

            @Html.EditorFor(model => rent.WorkerFIO)
        </div>
        <input type="submit" />

    }
</div>