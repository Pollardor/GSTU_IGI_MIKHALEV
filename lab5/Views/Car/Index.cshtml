@{
    ViewData["Title"] = "Journal";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model CarsViewModel
@using lab2.Models
@using IGILab1Norm;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<div>
    <form asp-action="Index" class="form-inline" method="post" style=" width:600px;margin:0px auto;">
        Price per day rent: @Html.TextBox("DayPrice", Model.CarFilter.DayPrice)
        Mech FIO: @Html.TextBox("MechFIO", Model.CarFilter.MechFIO)
        Year: @Html.TextBox("YearTO", Model.CarFilter.YearTO)
        <input type="submit" value="Find" />
    </form>
    <table style="width:100%; border:4px double; padding:20px;">
        <tr>
            <th>ID</th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.MarkSort">
                    Mark
                </a>
            </th>
            <th>Register Number</th>
            <th>Body Number</th>
            <th>Engine Number</th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.MileageSort">
                    Mileage
                </a>
            </th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.PriceSort">
                    Car Price
                </a>
            </th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.DayPriceSort">
                    Day Price
                </a>
            </th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.DateTOSort">
                    Date TO
                </a>
            </th>
            <th>Mech FIO</th>
            <th>
                <a asp-action="Index" asp-route-sortState="@Model.CarSort.Models.AgeSort">
                    Car Age
                </a>
            </th>
            <th>

            </th>
        </tr>
        @foreach (Car current in Model.Cars)
        {
            <tr>
                <td>@current.CarID</td>
                <td>@current.CarMark</td>
                <td>@current.RegNum</td>
                <td>@current.BodyNum</td>
                <td>@current.EngNum</td>
                <td>@current.Mileage</td>
                <td>@current.CarPrice</td>
                <td>@current.DayPrice</td>
                <td>@current.DateTO.ToString("yyyy-MM-dd")</td>
                <td>@current.MechFIO</td>
                <td>@current.CarAge</td>
                <td align="center" class="tdElem">
                    @using (Html.BeginForm("Editing", "Car", FormMethod.Post, new { @class = "form-signin" }))
                    {
                        <input type="hidden" name="id" value="@current.CarID.ToString()" />
                        <input class="btn btn-success" type="submit" value="Edit" formaction="Edit" />
                        <input class="btn btn-danger" type="submit" value="Delete" formaction="Delete" onclick="return confirm('Are you sure, that you want to delete car?');">
                    }
                </td>
            </tr>
        }
    </table>
    @lab2.Helpers.NavigationHelper.CreateNavigation(Html, "/Car/Index", Model.PageViewModel)
    @using (@Html.BeginForm("AddNewCar", "Car", FormMethod.Post))
    {

        Car car = (Car)ViewData["AddingCar"];
        <input type="hidden" value="@car.CarID" name="Id" />
        <div class="form-group">
            <label for="Mark">Input mark</label>

            @Html.EditorFor(model => car.CarMark)
        </div>
        <div class="form-group">
            <label for="RegNum">Input registration number</label>

            @Html.EditorFor(model => car.RegNum)
        </div>
        <div class="form-group">
            <label for="BodyNum">Input body number</label>

            @Html.EditorFor(model => car.BodyNum)
        </div>
        <div class="form-group">
            <label for="EngNum">Input engine number</label>

            @Html.EditorFor(model => car.EngNum)
        </div>
        <div class="form-group">
            <label for="Milleage">Input milleage</label>

            @Html.EditorFor(model => car.Mileage)
        </div>
        <div class="form-group">
            <label for="CarPrice">Input car price</label>

            @Html.EditorFor(model => car.CarPrice)
        </div>
        <div class="form-group">
            <label for="DayPrice">Input day price</label>

            @Html.EditorFor(model => car.DayPrice)
        </div>
        <div class="form-group">
            <label for="DateTO">Input date of TO</label>

            @Html.EditorFor(model => car.DateTO)
        </div>
        <div class="form-group">
            <label for="MechFIO">Input mechanick FIO</label>

            @Html.EditorFor(model => car.MechFIO)
        </div>
        <div class="form-group">
            <label for="CarAge">Input car age</label>

            @Html.EditorFor(model => car.CarAge)
        </div>
        <input type="submit" />

    }
</div>